<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="None" /><link rel="canonical" href="https://jorgego11.github.io/aiopslabs/" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Watson AIOps</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Integrations";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = "/aiopslabs/";
      </script>
    
    <script src="js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> Watson AIOps
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href=".">Integrations</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#define-elk-integration">Define ELK Integration</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#project-layout">Project layout</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="about/">About</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Watson AIOps</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" alt="Docs"></a> &raquo;</li><li>Integrations</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="welcome-to-the-watson-aiops-v33-lab">Welcome to the Watson AIOps v3.3 Lab</h1>
<p>For full product documentation visit <a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.3.1">here</a>.</p>
<h2 id="define-elk-integration">Define ELK Integration</h2>
<p>EFK is a variant of ELK. EFK is a suite of tools combining Elasticsearch, Fluentd, and Kibana that functions as a log aggregation tool. To simplify the installation and configuration effort for installing the different components of the EFK stack on OpenShift, we leverage the <code>OpenShift Logging</code> library from OpenShift. OpenShift customers that prefer not to spend part of their budget on a commercial log aggregator such as Humio, Splunk, or LogDNA, more than likely use the <code>OpenShift Logging</code> library.</p>
<p>To have AI Manager collect logs from the EFK installation that leverages the <code>OpenShift Logging</code> library, you need to define an ELK integration. Please note that it's not the purpose of this document to duplicate information that is already available in the Watson AIOps v3.3 <a href="https://www.ibm.com/docs/en/cloud-paks/cloud-pak-watson-aiops/3.3.0?topic=connections-elk">IBM documentation</a> for creating ELK integrations. We encourage you to go over those materials. However, here we provide the values that you should use for defining the ELK integration for the EFK installation you completed in the prior section (also, see screenshots below).</p>
<p><img alt="elk integration 1" src="elk-integration-1.png" title="ELK integration 1" /></p>
<ul>
<li><code>Name</code>: Name of your liking for the ELK integration (e.g. <code>EFK for QOTD</code>).</li>
<li>
<p><code>ELK service URL</code>: The service URL for the EFK installation. Executing the command below should show you the hostname you need to build the Elastic URL:</p>
<p><code>oc get routes -n openshift-logging | grep elastic</code></p>
<p><code>elasticsearch    elasticsearch-openshift-logging.apps.demo-apps.cp.fyre.ibm.com    elasticsearch    &lt;all&gt;   reencrypt    None</code></p>
<p>Once you have your Elastic hostname, you can build your URL such as <code>https://elasticsearch-openshift-logging.apps.demo-apps.cp.fyre.ibm.com/app*</code>. Make sure that you use <code>/app*</code> as the path in the URL value.</p>
</li>
<li>
<p><code>Kibana URL</code>: The URL for Kibana. Executing the command below should show you the hostname you need to build the Kibana URL:</p>
<p><code>oc get routes -n openshift-logging | grep kibana</code></p>
</li>
<li>
<p><code>Authentication type</code>: Set this value to <code>Token</code>.</p>
</li>
<li>
<p><code>Token</code>: The token for the <code>cluster-logging-operator</code> service account. You obtained this value in the previous section when you ran:</p>
<p><code>token=$(oc sa get-token cluster-logging-operator -n openshift-logging)</code></p>
</li>
<li>
<p><code>Kibana port</code>: Use <code>443</code> for this field.</p>
</li>
<li><code>Field mapping</code>: Use the mapping shown below instead of the default mapping provided on the ELK integration:</li>
</ul>
<pre><code>    {
      &quot;codec&quot;: &quot;elk&quot;,
      &quot;message_field&quot;: &quot;message&quot;,
      &quot;log_entity_types&quot;: &quot;kubernetes.container_image_id, kubernetes.host, kubernetes.pod_name, kubernetes.namespace_name&quot;,
      &quot;instance_id_field&quot;: &quot;kubernetes.container_name&quot;,
      &quot;rolling_time&quot;: 10,
      &quot;timestamp_field&quot;: &quot;@timestamp&quot;
    }
</code></pre>
<ul>
<li>
<p><code>Data flow</code>: You can turn this on if you intend to start ingesting log data.</p>
</li>
<li>
<p><code>Mode</code>: If collecting log data for AI training, select the <code>Live data for initial AI training</code> option.</p>
</li>
<li>
<p>For all other fields, the default values can be used.</p>
<p><img alt="elk integration 2" src="elk-integration-2.png" title="ELK integration 2" /></p>
<p><img alt="elk integration 3" src="elk-integration-3.png" title="ELK integration 3" /></p>
<p><img alt="elk integration 4" src="elk-integration-4.png" title="ELK integration 4" /></p>
<p><img alt="elk integration 5" src="elk-integration-5.png" title="ELK integration 5" /></p>
<p><img alt="elk integration 6" src="elk-integration-6.png" title="ELK integration 6" /></p>
</li>
</ul>
<h2 id="project-layout">Project layout</h2>
<pre><code>mkdocs.yml    # The configuration file.
docs/
    index.md  # The documentation homepage.
    ...       # Other markdown pages, images and other files.
</code></pre>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="about/" class="btn btn-neutral float-right" title="About">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="about/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme_extra.js" defer></script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.3.0
Build Date UTC : 2022-05-02 22:12:00.713938+00:00
-->
